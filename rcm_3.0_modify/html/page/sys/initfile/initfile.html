<div class="panel">
    <style type="text/css">
        th {
            text-align: center;
        }

        th, td {
            white-space: normal;
            /*word-wrap: break-word;*/
            word-break: break-all;
        }

        a {
            cursor: pointer;
            color: #0c5b8e;
        }
    </style>
    <div class="header">
        <span class="hd-title">系统-历史数据处理</span>
    </div>
    <div class="panel">
        <div class="panel-body">
            <div id="myTab" class="myTab">
                <ul class="nav nav-tabs bs-tabdrop-example" id="_myTopTab">
                    <li class="active">
                        <a href="/#dataSynchronize" data-toggle="tab">在途附件</a>
                    </li>
                    <li>
                        <a href="/#meetingData" data-toggle="tab">上会附件</a>
                    </li>
                </ul>
            </div>
            <div class="tab-content">
                <div class="tab-pane in active" id="dataSynchronize">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-12">
                                源
                                <select ng-model="fileTypesIndex" id="fileTypesIndex" ng-change="setCountInfo()"
                                        style="height: 30px;line-height: 30px;padding: 0 10px;border-radius: 4px;border: 1px solid #dddee1;width: 210px;">
                                    <option ng-repeat="fileType in fileTypes" value="{{$index}}"
                                            ng-selected="$index == 0">
                                        {{fileType.name}}
                                    </option>
                                </select>
                                &nbsp;
                                &nbsp;
                                <span ng-bind="info" style="color: #0c5b8e;"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                从
                                <input ng-model="fileSkip" type="number"
                                       style="height: 30px;line-height: 30px;padding: 0 10px;border-radius: 4px;border: 1px solid #dddee1;width: 210px;"
                                       title="Skip" id="Skip">
                                至
                                <input ng-model="fileLimit" type="number"
                                       style="height: 30px;line-height: 30px;padding: 0 10px;border-radius: 4px;border: 1px solid #dddee1;width: 210px;"
                                       title="Limit" id="Limit">
                                <a ng-click="querySynchronize()" style="color: blue;">同步查询</a>
                                <a ng-click="executeSynchronizeModule()" style="color:blue;">同步来源</a>
                                <input type="checkbox" class="checkbox-inline" style="margin: 1px 0px 0px;"
                                       ng-model="unSynchronize"/>
                                仅查询未同步附件
                                <input type="checkbox" class="checkbox-inline" style="margin: 1px 0px 0px;"
                                       ng-model="isLimit"/>
                                仅同步当前页附件
                            </div>
                            <div class="col-md-12">
                                <span style="color: red;font-size: small;">提示：请在查询或者同步历史附件时，尽量减少查询和同步的附件数量，以便加快页面加载，同时提高同步成功率！</span>
                            </div>
                        </div>
                        <div class="row table-responsive">
                            <div class="col-md-12">
                                <div id="resultDiv">
                                    <table class="table table-bordered table-hover datatable table-text-mid table-light padding0">
                                        <thead>
                                        <tr>
                                            <th width="5%">序号</th>
                                            <th width="15%">服务器文件名</th>
                                            <th width="20%">服务器文件路径</th>
                                            <th width="10%">存储的云库文件名</th>
                                            <th width="20%">存储的的云库路径</th>
                                            <th width="6%">附件页面位置</th>
                                            <th width="4%">版本</th>
                                            <th width="5%">服务</th>
                                            <th width="5%">云库</th>
                                            <th width="5%">同步</th>
                                            <th width="5%">操作</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="file in initFiles">
                                            <td width="5%">{{file.sequence+1}}</td>
                                            <td width="15%">{{file.nameServer}}</td>
                                            <td width="20%">{{file.pathServer}}</td>
                                            <td width="10%">{{file.nameCloud}}</td>
                                            <td width="20%">{{file.pathCloud}}</td>
                                            <td width="6%">{{file.location}}</td>
                                            <td width="4%">{{file.version}}</td>
                                            <td width="5%">{{file.server?'是':'否'}}</td>
                                            <td width="5%">{{file.cloud?'是':'否'}}</td>
                                            <td width="5%">{{file.synchronize?'是':'否'}}</td>
                                            <td width="5%">
                                                <a ng-click="executeSynchronize(file)">同步</a>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="meetingData">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-12">
                                源
                                <select ng-model="meetingType" id="meetingType" ng-change="getMeetingCount()"
                                        style="height: 30px;line-height: 30px;padding: 0 10px;border-radius: 4px;border: 1px solid #dddee1;width: 210px;">
                                    <option ng-repeat="meeting in meetingTypes" ng-selected="$index == 0"
                                            value="{{$index}}">
                                        {{meeting.dataName}}
                                    </option>
                                </select>
                                &nbsp;
                                &nbsp;
                                <span ng-bind="meetingInfo" style="color: #0c5b8e;"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                从
                                <input ng-model="meetingSkip" type="number"
                                       style="height: 30px;line-height: 30px;padding: 0 10px;border-radius: 4px;border: 1px solid #dddee1;width: 210px;"
                                       title="Skip" id="meetingSkip">
                                至
                                <input ng-model="meetingLimit" type="number"
                                       style="height: 30px;line-height: 30px;padding: 0 10px;border-radius: 4px;border: 1px solid #dddee1;width: 210px;"
                                       title="Limit" id="meetingLimit">
                                <a ng-click="queryMeetingSynchronize()" style="color: blue;">查询</a>
                                <a ng-click="executeMeetingSynchronize()" style="color:blue;">同步</a>
                                <input type="checkbox" class="checkbox-inline" style="margin: 1px 0px 0px;"
                                       ng-model="meetingUnSynchronize"/>
                                忽略已同步
                                <input type="checkbox" class="checkbox-inline" style="margin: 1px 0px 0px;"
                                       ng-model="meetingIsLimit"/>
                                同步当前页
                            </div>
                        </div>
                        <div class="row table-responsive">
                            <div class="col-md-12">
                                <div id="meetingDiv">
                                    <table class="table table-bordered table-hover datatable table-text-mid table-light padding0">
                                        <thead>
                                        <tr>
                                            <th width="5%">序号</th>
                                            <th width="10%">ID</th>
                                            <th width="80%" colspan="4">附件信息</th>
                                            <th width="5%">操作</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="meeting in meetingFiles">
                                            <td width="5%">{{meeting.sequence+1}}</td>
                                            <td width="10%">{{meeting.id}}</td>
                                            <td width="80%" colspan="4">
                                                <table class="table table-bordered datatable table-text-mid padding0">
                                                    <thead>
                                                    <tr>
                                                        <th width="10%">资源类型</th>
                                                        <th width="20%">附件名称</th>
                                                        <th width="45%">附件路径</th>
                                                        <th width="5%">版本号</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-repeat="file in meeting.files">
                                                        <td width="10%">{{file.ITEM_NAME}}</td>
                                                        <td width="20%">{{file.fileName}}</td>
                                                        <td width="45%">{{file.filePath}}</td>
                                                        <td width="5%">{{file.version}}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                            <td width="5%">
                                                更新
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>