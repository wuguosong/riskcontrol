<div class="panel-body">
	<!--form表单开始-->
	<form  class="form-horizontal" name="noticeName" id="noticeName"  onsubmit="return false;"  novalidate>
		<div class="">
			<div class="header detail-page">
				<img src="assets/images/icons/detail.png" width="" height="" alt="" title="" /><span class="hd-title" ng-if="action=='Complete'">决策通知书完成</span><span class="hd-title" ng-if="action=='Submit'">决策通知书确认</span>
			</div>
			<div class="panel">
				<div class="panel-heading"><div class="panel-hd-cont"><span class="panel-title">决策通知书<i class="i-triangle"></i></span></div></div>
				<div class="panel-body">
					<div id="myTab" class="myTab">
						<ul class="nav nav-tabs bs-tabdrop-example">
							<li class="active">
								<a href="javascript:;" data-toggle="tab">决策通知书</a>
							</li>
						</ul>
					</div>
					<div class="tab-content tab-content-bordered">
						<div class="tab-pane in active" id="contracts_file_info">
							<div class="row">
								<div class="table-responsive">
									<table border="0" cellspacing="0" cellpadding="0" class="table table-bordered  table-text-mid table-light">
										<tbody>
											<tr>
												<td>项目名称</td>
												<td colspan="3">{{nod.projectName}}</td>
											</tr>
											<tr class="tr-max">
												<td>合同规模<span class="required-r">*</span></td>
												<td colspan="3">
													<div class="has-feedback" ng-if="!serviceType14011402">
														<input type="text" name="contractScale" id="contractScale" 
														onkeyup="this.value=this.value.replace(/[^\d.]/g,'')"
														onafterpaste="this.value=this.value.replace(/[^\d.]/g,'')" 
														placeholder="0"
														class="form-control" ng-model="nod.contractScale"/>
														<span class="unit-s-td">万吨/日</span>
													</div>
													<div class="has-feedback" ng-if="serviceType14011402">
														<input type="text" name="contractScale" id="contractScale" 
														class="form-control" ng-model="nod.contractScale"/>
													</div>
												</td>
											</tr>
											<tr>
												<td>评审规模<span class="required-r">*</span></td>
												<td>
													<div class="has-feedback" ng-if="!serviceType14011402">
														<input type="text" name="evaluationScale" id="evaluationScale"
														onkeyup="this.value=this.value.replace(/[^\d.]/g,'')"
														onafterpaste="this.value=this.value.replace(/[^\d.]/g,'')" 
														placeholder="0" 
														class="form-control" ng-model="nod.evaluationScale" />
														<span class="unit-s-td">万吨/日</span>
													</div>
													<div class="has-feedback" ng-if="serviceType14011402">
														<input type="text" name="evaluationScale" id="evaluationScale"
														class="form-control" ng-model="nod.evaluationScale" />
													</div>
												</td>
												<td>评审总投资<span class="required-r">*</span></td>
												<td>
													<div class="has-feedback" style="float: left;">
														<input type="text" name="reviewOfTotalInvestment" id="reviewOfTotalInvestment"
														onkeyup="this.value=this.value.replace(/[^\d.]/g,'')"  onafterpaste="this.value=this.value.replace(/[^\d.]/g,'')"
														 placeholder="0.0"
														 class="form-control" ng-model="nod.reviewOfTotalInvestment"
															   onkeypress="if(!this.value.match(/^[\+\-]?\d*?\.?\d*?$/))this.value=this.t_value;else this.t_value=this.value;if(this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/))this.o_value=this.value"
															   onkeyup="if(!this.value.match(/^[\+\-]?\d*?\.?\d*?$/))this.value=this.t_value;else this.t_value=this.value;if(this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/))this.o_value=this.value"
															   onblur="if(!this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?|\.\d*?)?$/))this.value=this.o_value;else{if(this.value.match(/^\.\d+$/))this.value=0+this.value;if(this.value.match(/^\.$/))this.value=0;this.o_value=this.value}" 
															   data-toggle="tooltip" data-placement="top" data-html="true" data-backColor="white" title="建议注明口径，如为内控价、可研估算、初设概算金额"/>
														<span class="unit-my-td">万元</span>
													</div>
													<div style="float: left;">
													<select class="form-control" ng-model='nod.reviOfTotaInveType'><option ng-repeat="pszt in pingShenZongTouZiList" value="{{pszt.ITEM_NAME}}">{{pszt.ITEM_NAME}}</option></select>
													</div>
												</td>
											</tr>
											<tr>
												<td>所属大区</td>
												<td>
													<input type="text" readonly class="form-control" id="pertainArea" name="pertainArea" ng-model="nod.pertainArea.VALUE" placeholder="" readonly>
												</td>
												<td>原有项目再投资或已投资项目补充评审<span class="required-r">*</span></td>
												<td>
													<select name="additionalReview" id="additionalReview" class="form-control" ng-model="nod.additionalReview">
														<option value="">请选择...</option>
														<option value="1">是</option>
														<option value="2">否</option>
													</select>
												</td>
											</tr>
											<tr>
												<td>投资决策会议期次<span class="required-r">*</span></td>
												<td><input type="text" name="decisionStage" id="decisionStage" onkeyup="this.value=this.value.replace(/[^\d]/g,'')"
														onafterpaste="this.value=this.value.replace(/[^\d]/g,'')" class="form-control" ng-model="nod.decisionStage" disabled="disabled"/></td>
												<td>会议日期<span class="required-r">*</span></td>
												<td>
													<div class="has-feedback">
														<input type="text" name="dateOfMeeting" id="dateOfMeeting" class="form-control" ng-model="nod.dateOfMeeting"  disabled="disabled"/>
														<i class="fa fa-calendar form-control-feedback date-form"></i>
													</div>
												</td>
											</tr>
											<tr>
												<td>项目投资决策意见
													<span class="required-r">*</span>
												</td>
												<td colspan="3" class="radio-group">
													<label class="radio radio-inline">
														<input type="radio" class="px" name="consentToInvestment" ng-model="nod.consentToInvestment" value="1" disabled="disabled"/>
														<span class="lbl">同意投资</span>
													</label>
													<label class="radio radio-inline">
														<input type="radio" class="px" name="consentToInvestment" ng-model="nod.consentToInvestment" value="2" disabled="disabled"/>
														<span class="lbl">不同意投资</span>
													</label>
													<label class="radio radio-inline">
														<input type="radio" class="px" name="consentToInvestment" ng-model="nod.consentToInvestment" value="3" disabled="disabled"/>
														<span class="lbl">同意有条件投资</span>
													</label>
													<label class="radio radio-inline">
														<input type="radio" class="px" name="consentToInvestment" ng-model="nod.consentToInvestment" value="4" disabled="disabled"/>
														<span class="lbl">择期决议</span>
													</label>
													<!--<span class="radio-verify error">此项必填</span>-->
													<label for="consentToInvestment" class="radio-verify error">此项必填</label>
												</td>
											</tr>
											<tr class="tr-max">
												<td>项目投资前须落实事项</td>
												<td colspan="3"><textarea name="" ng-model="nod.implementationMatters" rows="" cols="" class="form-control" auto-height></textarea></td>
											</tr>
											<tr>
												<td>项目实施主体<span class="required-r" >*</span></td>
												<td>
<!-- 													<direct-common-org-single-select id="{{'subjectOfImplementation'}}" checked-common-org="nod.subjectOfImplementation" -->
<!-- 											    	    	mapped-key-value="subjectOfImplementationMapped"> -->
<!-- 													</direct-common-org-single-select> -->
													<direct-report-org-select id ="{{'rorg'}}" 
													url = "{{'org/queryAllOrg.do'}}"   
													mapped-key-value = "subjectOfImplementationMapped" 
													checked-org ="nod.subjectOfImplementation" 
													is-editable="'true'" 
													is-page="'true'" 
													columns = "columns">
												</direct-report-org-select>
												</td>
												<td>北控水务股权比例<span class="required-r">*</span></td>
												<td>
													<div class="has-feedback">
														<input type="text" name="equityRatio" id="equityRatio" ng-model="nod.equityRatio" class="form-control"
																onkeyup="this.value=this.value.replace(/[^\d.]/g,'')"  onafterpaste="this.value=this.value.replace(/[^\d.]/g,'')" placeholder="0.0"
															   onkeypress="if(!this.value.match(/^[\+\-]?\d*?\.?\d*?$/))this.value=this.t_value;else this.t_value=this.value;if(this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/))this.o_value=this.value"
															   onkeyup="if(!this.value.match(/^[\+\-]?\d*?\.?\d*?$/))this.value=this.t_value;else this.t_value=this.value;if(this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/))this.o_value=this.value"
															   onblur="if(!this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?|\.\d*?)?$/))this.value=this.o_value;else{if(this.value.match(/^\.\d+$/))this.value=0+this.value;if(this.value.match(/^\.$/))this.value=0;this.o_value=this.value}"
															   data-toggle="tooltip" data-placement="top" data-html="true" data-backColor="white" title="穿透后集团在项目公司的持股比例"/>
														<span class="percent">%</span>
													</div>
												</td>
											</tr>
											<tr>
												<td>是否新注册项目公司<span class="required-r">*</span></td>
												<td>
													<select name="register" id="register" class="form-control" ng-model="nod.register">
														<option value="">请选择...</option>
														<option value="1">是</option>
														<option value="2">否</option>
													</select>
												</td>
												<td>注册资本金<span class="required-r">*</span></td>
												<td>
													<div class="has-feedback">
														<input type="text" name="registeredCapital" id="registeredCapital" ng-model="nod.registeredCapital" class="form-control" data-toggle="tooltip" data-placement="top" data-html="true" data-backColor="white" title="<div>对于非全资项目，需注明为项目公司全部注册资本金或其中我方出资部分，整体原则是要与北控水务股权比例相呼应，不产生歧义；</div><div>对非新设项目公司，应注明“增资**万元”或“不增资”。</div>"/>
													</div>
												</td>
											</tr>
											<tr>
												<td>责任单位<span class="required-r">*</span></td>
												<td>
<!-- 													<direct-common-org-single-select id="{{'responsibilityUnit'}}" checked-common-org="nod.responsibilityUnit" -->
<!-- 											    	    	mapped-key-value="responsibilityUnitMapped"> -->
<!-- 													</direct-common-org-single-select> -->
													<direct-report-org-select id ="{{'responsibilityUnit'}}" 
													url = "{{'org/queryAllOrg.do'}}"   
													mapped-key-value = "responsibilityUnitMapped" 
													checked-org ="nod.responsibilityUnit" 
													is-editable="'true'" 
													is-page="'true'" 
													columns = "columns">
												</direct-report-org-select>
												<td>责任人<span class="required-r">*</span></td>
												<td>
													<div class="row nobottom-mar">
														<direct-user-multi-select id="{{'notPersonLiable'}}" checked-users="nod.personLiable"
											    	    	mapped-key-value="noticePersonLiable">
														</direct-user-multi-select>
													</div>
												</td>
											</tr>
											<tr class="tr-max">
												<td>执行要求<span class="required-r">*</span></td>
												<td colspan="3">
													<label class="radio checkbox-inline">
														<input type="checkbox" class="px" ng-model="requireTask1" ng-click="nod.require1=null"/>
														<span class="lbl">纳入收益考核要求</span>
													</label>
													<a href="javascript:void(0);" data-toggle="tooltip" data-placement="top" data-html="true" data-backColor="white" title="<div>此类别中应填写：若无法达成该条件，则能够直接测算出对收益率影响的事项，</div><div>举例如：税收优惠、工程利润返还、成本控制等</div>">提示</a>
													&nbsp;
													<label class="radio checkbox-inline">
														<input type="checkbox" class="px" ng-model="requireTask2" ng-click="nod.require2=null"/>
														<span class="lbl">单独考核要求</span>
													</label>
													<a href="javascript:void(0);" data-toggle="tooltip" data-placement="top" data-html="true" data-backColor="white" title="<div>此类别中应填写：必须落实，但无法直接与收益率测算挂钩的事项。</div><div>举例如：入库及列入预算、退出保障条款、免责条款</div>">提示</a>
													&nbsp;
													<label class="radio checkbox-inline">
														<input type="checkbox" class="px" ng-model="requireTask3" ng-click="nod.require3=null"/>
														<span class="lbl">建议及挖潜</span>
													</label>
													<a href="javascript:void(0);" data-toggle="tooltip" data-placement="top" data-html="true" data-backColor="white" title="<div>此类别中应填写：鼓励落实，若能落实将提升项目收益的事项。</div><div>如未计入收益的税收筹划建议等</div>">提示</a>													
													<div ng-if="requireTask1">
													纳入收益考核要求<textarea ng-model="nod.require1" id="require1" name="require1" rows="" cols="" class="form-control" auto-height></textarea>
													</div>
													<div ng-if="requireTask2">
													单独考核要求<textarea ng-model="nod.require2" id="require2" name="require2" rows="" cols="" class="form-control" auto-height></textarea>
													</div>
													<div ng-if="requireTask3">
													建议及挖潜<textarea ng-model="nod.require3" id="require3" name="require3" rows="" cols="" class="form-control" auto-height></textarea>
													</div>
												</td>
											</tr>
											<tr class="tr-max">
												<td>决策编号<span class="required-r">*</span></td>
												<td colspan="3">
													<input type="text" name="decisionNo" id="decisionNo" class="form-control" ng-model="nod.decisionNo"/>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						<div class="tab-pane" id="flow_chart">
<!-- 							<directive-process-list></directive-process-list> -->
						</div>
					</div>
				</div>
			</div>
		<!-- 	<div class="panel" ng-show="action=='view3'">
				<div class="panel-heading">
					<div class="panel-heading"><div class="panel-hd-cont"><span class="panel-title">上传决策通知书附件<i class="i-triangle"></i></span></div></div>
					<div class="panel-body">
						<div class="row">
							<label class="col-sm-2 control-label">决策通知书相关附件</label>
							<div class="col-sm-10">
								<div class="col-sm-10 noleft-pad">
									<div class="col-sm-2">
										<button type="button" class="btn btn-info" ngf-max-size="100MB" ngf-select="upload($file,$invalidFiles, $index)">浏览</button>
									</div>
									<div class="col-sm-10 noleft-pad">
										<span ng-bind="progress$index"></span>
										<span style="">{{errorAttach[$index].msg}}</span>
										<a href="javascript:void(0);" ng-click="downLoadFile(nod.attachment[0])" style="line-height: 27px;">{{nod.attachment[0].fileName}}</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div> -->
			<div class="panel" ng-show="null!=nod.attachment[0]  && ''!=nod.attachment[0]">
				<div class="panel-heading">
					<div class="panel-heading"><div class="panel-hd-cont"><span class="panel-title">决策通知书附件<i class="i-triangle"></i></span></div></div>
					<div class="panel-body">
						<div class="row">
							<label class="col-sm-2 control-label">决策通知书相关附件</label>
							<div class="col-sm-10">
								<div class="col-sm-10 noleft-pad">
									<div class="col-sm-2">

									</div>
									<div class="col-sm-10 noleft-pad">
										<span ng-bind="progress$index"></span>
										<!--<span style="">{{errorAttach[$index].msg}}</span>-->
										<a href="javascript:void(0);" ng-click="downLoadBiddingFile(nod.attachment[0])" style="line-height: 27px;">{{nod.attachment[0].fileName}}</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="button-group">
			<div class="row">
				<div class="option txl">
					<directive-return-btn url="{{oldUrl}}"></directive-return-btn>
					<button type="button" ng-if="action=='Submit'" ng-click="complete()" class="btn btn-info"><i class="fa fa-save"></i>保存</button>
					<button type="button" ng-if="action=='Submit'" ng-click="showSubmitModal()" class="btn btn-info"><i class="fa fa-cloud-upload"></i>确认</button>
					<button type="button" ng-if="action=='Complete'" ng-click="complete()" class="btn btn-info"><i class="fa fa-save"></i>完成</button>
					<button type="button" ng-click="complete('createWord')" class="btn btn-info"><i class="fa fa-file-o"></i>生成Word文档</button>
				</div>
			</div>
		</div>
	</form>
</div>
<div id="submitModal"  class="modal" tabindex="-1" role="dialog" style="display: none;">
	<direct-common-upload title="{{'决策通知书附件'}}" attachment="attachment" callback="confirm"></direct-common-upload>				
</div>
<script  type="text/javascript">
	angular.element(document).ready(function() {
		var options = {
			todayBtn: "linked",
			orientation: $('body').hasClass('right-to-left') ? "auto right" : 'auto auto'
		}
		$('#bs-datepicker-edit').datepicker();
		$('#dateOfMeeting').datepicker(options);
		
		//初始化提示信息框
		$("[data-toggle='tooltip']").tooltip();
   });
  $(document).ready(function() {
		// validate signup form on keyup and submit
		$("#noticeName").validate({
			rules: {
				implementationRequirements:"required",
				registeredCapital:"required",
				register:"required",
				equityRatio:"required",
				dateOfMeeting:"required",
				decisionStage:"required",
				additionalReview:"required",
				reviewOfTotalInvestment:"required",
				evaluationScale:"required",
				directPersonName:"required",
				contractScale:"required",
				consentToInvestment:"required",
				decisionNo:"required",
				require1:"required",
				require2:"required",
				require3:"required"
			},
			messages: {
				implementationRequirements:"此项必填",
				registeredCapital:"此项必填",
				register:"此项必填",
				equityRatio:"请填入数字",
				dateOfMeeting:"此项必填",
				decisionStage:"此项必填",
				additionalReview:"此项必填",
				reviewOfTotalInvestment:"请填入数字",
				evaluationScale:"此项必填",
				directPersonName:"此项必填",
				contractScale:"此项必填",
				consentToInvestment:"此项必填",
			    decisionNo:"请填入数字",
		    	require1:"纳入收益考核要求 不能为空",
				require2:"单独考核要求 不能为空",
				require3:"建议及挖潜 不能为空"
			}
		});
	});
</script>
