<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <link rel="stylesheet" href="css/demo.css" type="text/css">
	<link rel="stylesheet" href="css/zTreeStyle/zTreeStyle.css" type="text/css">
	<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
	<script type="text/javascript" src="js/jquery.ztree.core.js"></script>
	<script type="text/javascript" src="js/jquery.ztree.excheck.min.js"></script>
	<SCRIPT type="text/javascript">
		<!--
		var setting = {
			check: {
				enable: true,
				chkStyle: "checkbox"
			},
			callback:{
				beforeExpand:function(treeId, treeNode){
					if(typeof(treeNode.children)=='undefined'){
						ztree.addNodes(treeNode, newNodes, true);
					}
				}
			}
		};
		
		function filter(treeId, parentNode, data) {
			if (!data || data.result_code != 'S') return null;
			var retList = data.result_data;
			if(retList<1) return null;
			for(var i=0;i<retList.length;i++){
				curNode = retList[i];
				var iconUrl = 'css/zTreeStyle/img/department.png';
				if(curNode.cat && curNode.cat=='Org'){
					iconUrl = 'css/zTreeStyle/img/org.png';
				}
				curNode.icon = iconUrl;
				//retList[i].checked=true;
			}
			return retList;
		}
		
		//获取所有选中节点的值
		function GetCheckedAll() {
			var treeObj = $.fn.zTree.getZTreeObj("treeDemo");
			var nodes = treeObj.getCheckedNodes(true);
			var msg = "name--id--pid\n";
			for (var i = 0; i < nodes.length; i++) {
				msg += nodes[i].name+"--"+nodes[i].id+"--"+nodes[i].pid+"\n";
			}
			return msg;
		}
		
		
		var rootNode = [{id:'1', name:'北控水务', isParent:true}],
			newNodes = [{id:'2',name:'xxxxx', isParent:false},{id:'3',name:'fffff', isParent:false}];
		var ztree = null;
		$(document).ready(function(){
			ztree = $.fn.zTree.init($("#treeDemo"), setting);
			ztree.addNodes(null, rootNode);
		});
		//-->
	</SCRIPT>
 </head>
 <body>
  <div>
		<ul id="treeDemo" class="ztree"></ul>
	</div>

 </body>
</html>
